#include "cantus.h"
#include "driver/lcd.h"

#define LCD_SUPPORT_FILESYSTEM

#if 0
const static unsigned char font8x8[128][8] = 
{
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, },// ascii_0
	{ 0x7e, 0x81, 0xa5, 0x81, 0xbd, 0x99, 0x81, 0x7e, },// ascii_1
	{ 0x7e, 0xff, 0xdb, 0xff, 0xc3, 0xe7, 0xff, 0x7e, },// ascii_2
	{ 0x6c, 0xfe, 0xfe, 0xfe, 0x7c, 0x38, 0x10, 0x00, },// ascii_3
	{ 0x10, 0x38, 0x7c, 0xfe, 0x7c, 0x38, 0x10, 0x00, },// ascii_4
	{ 0x38, 0x7c, 0x38, 0xfe, 0xfe, 0x7c, 0x38, 0x7c, },// ascii_5
	{ 0x10, 0x10, 0x38, 0x7c, 0xfe, 0x7c, 0x38, 0x7c, },// ascii_6
	{ 0x00, 0x00, 0x18, 0x3c, 0x3c, 0x18, 0x00, 0x00, },// ascii_7
	{ 0xff, 0xff, 0xe7, 0xc3, 0xc3, 0xe7, 0xff, 0xff, },// ascii_8
	{ 0x00, 0x3c, 0x66, 0x42, 0x42, 0x66, 0x3c, 0x00, },// ascii_9
	{ 0xff, 0xc3, 0x99, 0xbd, 0xbd, 0x99, 0xc3, 0xff, },// ascii_10
	{ 0x0f, 0x07, 0x0f, 0x7d, 0xcc, 0xcc, 0xcc, 0x78, },// ascii_11
	{ 0x3c, 0x66, 0x66, 0x66, 0x3c, 0x18, 0x7e, 0x18, },// ascii_12
	{ 0x3f, 0x33, 0x3f, 0x30, 0x30, 0x70, 0xf0, 0xe0, },// ascii_13
	{ 0x7f, 0x63, 0x7f, 0x63, 0x63, 0x67, 0xe6, 0xc0, },// ascii_14
	{ 0x99, 0x5a, 0x3c, 0xe7, 0xe7, 0x3c, 0x5a, 0x99, },// ascii_15
	{ 0x80, 0xe0, 0xf8, 0xfe, 0xf8, 0xe0, 0x80, 0x00, },// ascii_16
	{ 0x02, 0x0e, 0x3e, 0xfe, 0x3e, 0x0e, 0x02, 0x00, },// ascii_17
	{ 0x18, 0x3c, 0x7e, 0x18, 0x18, 0x7e, 0x3c, 0x18, },// ascii_18
	{ 0x66, 0x66, 0x66, 0x66, 0x66, 0x00, 0x66, 0x00, },// ascii_19
	{ 0x7f, 0xdb, 0xdb, 0x7b, 0x1b, 0x1b, 0x1b, 0x00, },// ascii_20
	{ 0x3e, 0x63, 0x38, 0x6c, 0x6c, 0x38, 0xcc, 0x78, },// ascii_21
	{ 0x00, 0x00, 0x00, 0x00, 0x7e, 0x7e, 0x7e, 0x00, },// ascii_22
	{ 0x18, 0x3c, 0x7e, 0x18, 0x7e, 0x3c, 0x18, 0xff, },// ascii_23
	{ 0x18, 0x3c, 0x7e, 0x18, 0x18, 0x18, 0x18, 0x00, },// ascii_24
	{ 0x18, 0x18, 0x18, 0x18, 0x7e, 0x3c, 0x18, 0x00, },// ascii_25
	{ 0x00, 0x18, 0x0c, 0xfe, 0x0c, 0x18, 0x00, 0x00, },// ascii_26
	{ 0x00, 0x30, 0x60, 0xfe, 0x60, 0x30, 0x00, 0x00, },// ascii_27
	{ 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xfe, 0x00, 0x00, },// ascii_28
	{ 0x00, 0x24, 0x66, 0xff, 0x66, 0x24, 0x00, 0x00, },// ascii_29
	{ 0x00, 0x18, 0x3c, 0x7e, 0xff, 0xff, 0x00, 0x00, },// ascii_30
	{ 0x00, 0xff, 0xff, 0x7e, 0x3c, 0x18, 0x00, 0x00, },// ascii_31
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, },// ascii_32
	{ 0x30, 0x78, 0x78, 0x78, 0x30, 0x00, 0x30, 0x00, },// ascii_33
	{ 0x6c, 0x6c, 0x6c, 0x00, 0x00, 0x00, 0x00, 0x00, },// ascii_34
	{ 0x6c, 0x6c, 0xfe, 0x6c, 0xfe, 0x6c, 0x6c, 0x00, },// ascii_35
	{ 0x30, 0x7c, 0xc0, 0x78, 0x0c, 0xf8, 0x30, 0x00, },// ascii_36
	{ 0x00, 0xc6, 0xcc, 0x18, 0x30, 0x66, 0xc6, 0x00, },// ascii_37
	{ 0x38, 0x6c, 0x38, 0x76, 0xdc, 0xcc, 0x76, 0x00, },// ascii_38
	{ 0x60, 0x60, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, },// ascii_39
	{ 0x18, 0x30, 0x60, 0x60, 0x60, 0x30, 0x18, 0x00, },// ascii_40
	{ 0x60, 0x30, 0x18, 0x18, 0x18, 0x30, 0x60, 0x00, },// ascii_41
	{ 0x00, 0x66, 0x3c, 0xff, 0x3c, 0x66, 0x00, 0x00, },// ascii_42
	{ 0x00, 0x30, 0x30, 0xfc, 0x30, 0x30, 0x00, 0x00, },// ascii_43
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x60, },// ascii_44
	{ 0x00, 0x00, 0x00, 0xfc, 0x00, 0x00, 0x00, 0x00, },// ascii_45
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, },// ascii_46
	{ 0x06, 0x0c, 0x18, 0x30, 0x60, 0xc0, 0x80, 0x00, },// ascii_47
	{ 0x7c, 0xc6, 0xce, 0xde, 0xf6, 0xe6, 0x7c, 0x00, },// ascii_48 '0' 
	{ 0x30, 0x70, 0x30, 0x30, 0x30, 0x30, 0xfc, 0x00, },// ascii_49 '1' 
	{ 0x78, 0xcc, 0x0c, 0x38, 0x60, 0xcc, 0xfc, 0x00, },// ascii_50 '2' 
	{ 0x78, 0xcc, 0x0c, 0x38, 0x0c, 0xcc, 0x78, 0x00, },// ascii_51 '3' 
	{ 0x1c, 0x3c, 0x6c, 0xcc, 0xfe, 0x0c, 0x1e, 0x00, },// ascii_52 '4' 
	{ 0xfc, 0xc0, 0xf8, 0x0c, 0x0c, 0xcc, 0x78, 0x00, },// ascii_53 '5' 
	{ 0x38, 0x60, 0xc0, 0xf8, 0xcc, 0xcc, 0x78, 0x00, },// ascii_54 '6' 
	{ 0xfc, 0xcc, 0x0c, 0x18, 0x30, 0x30, 0x30, 0x00, },// ascii_55 '7' 
	{ 0x78, 0xcc, 0xcc, 0x78, 0xcc, 0xcc, 0x78, 0x00, },// ascii_56 '8' 
	{ 0x78, 0xcc, 0xcc, 0x7c, 0x0c, 0x18, 0x70, 0x00, },// ascii_57 '9' 
	{ 0x00, 0x30, 0x30, 0x00, 0x00, 0x30, 0x30, 0x00, },// ascii_58
	{ 0x00, 0x30, 0x30, 0x00, 0x00, 0x30, 0x30, 0x60, },// ascii_59
	{ 0x18, 0x30, 0x60, 0xc0, 0x60, 0x30, 0x18, 0x00, },// ascii_60
	{ 0x00, 0x00, 0xfc, 0x00, 0x00, 0xfc, 0x00, 0x00, },// ascii_61
	{ 0x60, 0x30, 0x18, 0x0c, 0x18, 0x30, 0x60, 0x00, },// ascii_62
	{ 0x78, 0xcc, 0x0c, 0x18, 0x30, 0x00, 0x30, 0x00, },// ascii_63
	{ 0x7c, 0xc6, 0xde, 0xde, 0xde, 0xc0, 0x78, 0x00, },// ascii_64
	{ 0x30, 0x78, 0xcc, 0xcc, 0xfc, 0xcc, 0xcc, 0x00, },// ascii_65 'A' 
	{ 0xfc, 0x66, 0x66, 0x7c, 0x66, 0x66, 0xfc, 0x00, },// ascii_66 'B' 
	{ 0x3c, 0x66, 0xc0, 0xc0, 0xc0, 0x66, 0x3c, 0x00, },// ascii_67 'C' 
	{ 0xf8, 0x6c, 0x66, 0x66, 0x66, 0x6c, 0xf8, 0x00, },// ascii_68 'D' 
	{ 0x7e, 0x60, 0x60, 0x78, 0x60, 0x60, 0x7e, 0x00, },// ascii_69 'E' 
	{ 0x7e, 0x60, 0x60, 0x78, 0x60, 0x60, 0x60, 0x00, },// ascii_70 'F' 
	{ 0x3c, 0x66, 0xc0, 0xc0, 0xce, 0x66, 0x3e, 0x00, },// ascii_71 'G' 
	{ 0xcc, 0xcc, 0xcc, 0xfc, 0xcc, 0xcc, 0xcc, 0x00, },// ascii_72 'H' 
	{ 0x78, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00, },// ascii_73 'I' 
	{ 0x1e, 0x0c, 0x0c, 0x0c, 0xcc, 0xcc, 0x78, 0x00, },// ascii_74 'J' 
	{ 0xe6, 0x66, 0x6c, 0x78, 0x6c, 0x66, 0xe6, 0x00, },// ascii_75 'K' 
	{ 0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x7e, 0x00, },// ascii_76 'L' 
	{ 0xc6, 0xee, 0xfe, 0xfe, 0xd6, 0xc6, 0xc6, 0x00, },// ascii_77 'M' 
	{ 0xc6, 0xe6, 0xf6, 0xde, 0xce, 0xc6, 0xc6, 0x00, },// ascii_78 'N' 
	{ 0x38, 0x6c, 0xc6, 0xc6, 0xc6, 0x6c, 0x38, 0x00, },// ascii_79 'O' 
	{ 0xfc, 0x66, 0x66, 0x7c, 0x60, 0x60, 0xf0, 0x00, },// ascii_80 'P' 
	{ 0x78, 0xcc, 0xcc, 0xcc, 0xdc, 0x78, 0x1c, 0x00, },// ascii_81 'Q' 
	{ 0xfc, 0x66, 0x66, 0x7c, 0x6c, 0x66, 0xe6, 0x00, },// ascii_82 'R' 
	{ 0x78, 0xcc, 0xe0, 0x70, 0x1c, 0xcc, 0x78, 0x00, },// ascii_83 'S' 
	{ 0xfc, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x00, },// ascii_84 'T' 
	{ 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0xfc, 0x00, },// ascii_85 'U' 
	{ 0xcc, 0xcc, 0xcc, 0xcc, 0xcc, 0x78, 0x30, 0x00, },// ascii_86 'V' 
	{ 0xc6, 0xc6, 0xc6, 0xd6, 0xfe, 0xee, 0xc6, 0x00, },// ascii_87 'W' 
	{ 0xc6, 0xc6, 0x6c, 0x38, 0x38, 0x6c, 0xc6, 0x00, },// ascii_88 'X' 
	{ 0xcc, 0xcc, 0xcc, 0x78, 0x30, 0x30, 0x78, 0x00, },// ascii_89 'Y' 
	{ 0xfe, 0x06, 0x0c, 0x18, 0x30, 0x60, 0xfe, 0x00, },// ascii_90 'Z' 
	{ 0x78, 0x60, 0x60, 0x60, 0x60, 0x60, 0x78, 0x00, },// ascii_91
	{ 0xc0, 0x60, 0x30, 0x18, 0x0c, 0x06, 0x02, 0x00, },// ascii_92
	{ 0x78, 0x18, 0x18, 0x18, 0x18, 0x18, 0x78, 0x00, },// ascii_93
	{ 0x10, 0x38, 0x6c, 0xc6, 0x00, 0x00, 0x00, 0x00, },// ascii_94
	{ 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, },// ascii_95
	{ 0x30, 0x30, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, },// ascii_96
	{ 0x00, 0x00, 0x78, 0x0c, 0x7c, 0xcc, 0x76, 0x00, },// ascii_97 'a' 
	{ 0xe0, 0x60, 0x60, 0x7c, 0x66, 0x66, 0xdc, 0x00, },// ascii_98 'b' 
	{ 0x00, 0x00, 0x78, 0xcc, 0xc0, 0xcc, 0x78, 0x00, },// ascii_99 'c' 
	{ 0x1c, 0x0c, 0x0c, 0x7c, 0xcc, 0xcc, 0x76, 0x00, },// ascii_100 'd' 
	{ 0x00, 0x00, 0x78, 0xcc, 0xfc, 0xc0, 0x78, 0x00, },// ascii_101 'e' 
	{ 0x38, 0x6c, 0x60, 0xf0, 0x60, 0x60, 0xf0, 0x00, },// ascii_102 'f' 
	{ 0x00, 0x00, 0x76, 0xcc, 0xcc, 0x7c, 0x0c, 0xf8, },// ascii_103 'g' 
	{ 0xe0, 0x60, 0x6c, 0x76, 0x66, 0x66, 0xe6, 0x00, },// ascii_104 'h' 
	{ 0x30, 0x00, 0x70, 0x30, 0x30, 0x30, 0x78, 0x00, },// ascii_105 'i' 
	{ 0x0c, 0x00, 0x0c, 0x0c, 0x0c, 0xcc, 0xcc, 0x78, },// ascii_106 'j' 
	{ 0xe0, 0x60, 0x66, 0x6c, 0x78, 0x6c, 0xe6, 0x00, },// ascii_107 'k' 
	{ 0x70, 0x30, 0x30, 0x30, 0x30, 0x30, 0x78, 0x00, },// ascii_108 'l' 
	{ 0x00, 0x00, 0xcc, 0xfe, 0xfe, 0xd6, 0xc6, 0x00, },// ascii_109 'm' 
	{ 0x00, 0x00, 0xf8, 0xcc, 0xcc, 0xcc, 0xcc, 0x00, },// ascii_110 'n' 
	{ 0x00, 0x00, 0x78, 0xcc, 0xcc, 0xcc, 0x78, 0x00, },// ascii_111 'o' 
	{ 0x00, 0x00, 0xdc, 0x66, 0x66, 0x7c, 0x60, 0xf0, },// ascii_112 'p' 
	{ 0x00, 0x00, 0x76, 0xcc, 0xcc, 0x7c, 0x0c, 0x1e, },// ascii_113 'q' 
	{ 0x00, 0x00, 0xdc, 0x76, 0x66, 0x60, 0xf0, 0x00, },// ascii_114 'r' 
	{ 0x00, 0x00, 0x7c, 0xc0, 0x78, 0x0c, 0xf8, 0x00, },// ascii_115 's' 
	{ 0x10, 0x30, 0x7c, 0x30, 0x30, 0x34, 0x18, 0x00, },// ascii_116 't' 
	{ 0x00, 0x00, 0xcc, 0xcc, 0xcc, 0xcc, 0x76, 0x00, },// ascii_117 'u' 
	{ 0x00, 0x00, 0xcc, 0xcc, 0xcc, 0x78, 0x30, 0x00, },// ascii_118 'v' 
	{ 0x00, 0x00, 0xc6, 0xd6, 0xfe, 0xfe, 0x6c, 0x00, },// ascii_119 'w' 
	{ 0x00, 0x00, 0xc6, 0x6c, 0x38, 0x6c, 0xc6, 0x00, },// ascii_120 'x' 
	{ 0x00, 0x00, 0xcc, 0xcc, 0xcc, 0x7c, 0x0c, 0xf8, },// ascii_121 'y' 
	{ 0x00, 0x00, 0xfc, 0x98, 0x30, 0x64, 0xfc, 0x00, },// ascii_122 'z' 
	{ 0x1c, 0x30, 0x30, 0xe0, 0x30, 0x30, 0x1c, 0x00, },// ascii_123
	{ 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x18, 0x00, },// ascii_124
	{ 0xe0, 0x30, 0x30, 0x1c, 0x30, 0x30, 0xe0, 0x00, },// ascii_125
	{ 0x76, 0xdc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, },// ascii_126
	{ 0x00, 0x10, 0x38, 0x6c, 0xc6, 0xc6, 0xfe, 0x00, }// ascii_127
};
void GetFontData(unsigned char ch,char* buf)
{
	int i;
	if(ch > 127)
	{
		memset(buf,0,8);
		return ;
	}
	for(i=0;i<8;i++)
		buf[i] = font8x8[(int)ch][i];
}
#else

 const static unsigned short font8x16[]={
		0x0000,	//................ 0x20
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x21
		0x0000,	//................
		0x0000,	//................
		0x33FE,	//..OO..OOOOOOOOO.
		0x33FE,	//..OO..OOOOOOOOO.
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x22
		0x0000,	//................
		0x0006,	//.............OO.
		0x000E,	//............OOO.
		0x0000,	//................
		0x0006,	//.............OO.
		0x000E,	//............OOO.
		0x0000,	//................

		0x0000,	//................ 0x23
		0x0410,	//.....O.....O....
		0x3FFE,	//..OOOOOOOOOOOOO.
		0x3FFE,	//..OOOOOOOOOOOOO.
		0x0410,	//.....O.....O....
		0x3FFE,	//..OOOOOOOOOOOOO.
		0x3FFE,	//..OOOOOOOOOOOOO.
		0x0410,	//.....O.....O....

		0x0000,	//................ 0x24
		0x1E30,	//...OOOO...OO....
		0x1E78,	//...OOOO..OOOO...
		0x084F,	//....O....O..OOOO
		0x70C7,	//.OOO....OO...OOO
		0x7888,	//.OOOO...O...O...
		0x0FBC,	//....OOOOO.OOOO..
		0x073C,	//.....OOO..OOOO..

		0x0000,	//................ 0x25
		0x0C38,	//....OO....OOO...
		0x066C,	//.....OO..OO.OO..
		0x036C,	//......OO.OO.OO..
		0x1DB8,	//...OOO.OO.OOO...
		0x36C0,	//..OO.OO.OO......
		0x3660,	//..OO.OO..OO.....
		0x1C30,	//...OOO....OO....

		0x0000,	//................ 0x26
		0x1E00,	//...OOOO.........
		0x3FB8,	//..OOOOOOO.OOO...
		0x21FC,	//..O....OOOOOOO..
		0x2384,	//..O...OOO....O..
		0x3E7C,	//..OOOOO..OOOOO..
		0x1F38,	//...OOOOO..OOO...
		0x3100,	//..OO...O........

		0x0000,	//................ 0x27
		0x0000,	//................
		0x0000,	//................
		0x0006,	//.............OO.
		0x000E,	//............OOO.
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x28
		0x0000,	//................
		0x07E0,	//.....OOOOOO.....
		0x1FF8,	//...OOOOOOOOOO...
		0x381C,	//..OOO......OOO..
		0x6006,	//.OO..........OO.
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x29
		0x0000,	//................
		0x6006,	//.OO..........OO.
		0x301C,	//..OO.......OOO..
		0x1FF8,	//...OOOOOOOOOO...
		0x07E0,	//.....OOOOOO.....
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x2a
		0x0220,	//......O...O.....
		0x0140,	//.......O.O......
		0x07F0,	//.....OOOOOOO....
		0x07F0,	//.....OOOOOOO....
		0x0140,	//.......O.O......
		0x0220,	//......O...O.....
		0x0000,	//................

		0x0000,	//................ 0x2b
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x07F0,	//.....OOOOOOO....
		0x07F0,	//.....OOOOOOO....
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x0000,	//................

		0x0000,	//................ 0x2c
		0x0000,	//................
		0x0000,	//................
		0xB000,	//O.OO............
		0x7000,	//.OOO............
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x2d
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x0080,	//........O.......

		0x0000,	//................ 0x2e
		0x0000,	//................
		0x0000,	//................
		0x3000,	//..OO............
		0x3000,	//..OO............
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x2f
		0x3000,	//..OO............
		0x3c00,	//..OOOO..........
		0x0f00,	//....OOOO........
		0x03c0,	//......OOOO......
		0x00f0,	//........OOOO....
		0x003c,	//..........OOOO..
		0x000c,	//............OO..

		0x0000,	//................ 0x30
		0x0FF0,	//....OOOOOOOO....
		0x1FF8,	//...OOOOOOOOOO...
		0x300C,	//..OO........OO..
		0x2004,	//..O..........O..
		0x300C,	//..OO........OO..
		0x1FF8,	//...OOOOOOOOOO...
		0x0FF0,	//....OOOOOOOO....

		0x0000,	//................ 0x31
		0x2004,	//..O..........O..
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2000,	//..O.............
		0x2000,	//..O.............
		0x0000,	//................

		0x0000,	//................ 0x32
		0x3838,	//..OOO.....OOO...
		0x3E3C,	//..OOOOO...OOOO..
		0x0B04,	//....O.OO.....O..
		0x1184,	//...O...OO....O..
		0x20C4,	//..O.....OO...O..
		0x387C,	//..OOO....OOOOO..
		0x1838,	//...OO.....OOO...

		0x0000,	//................ 0x33
		0x183C,	//...OO.....OOOO..
		0x383C,	//..OOO.....OOOO..
		0x2084,	//..O.....O....O..
		0x20C4,	//..O.....OO...O..
		0x31F4,	//..OO...OOOOO.O..
		0x1F3C,	//...OOOOO..OOOO..
		0x0E0C,	//....OOO.....OO..

		0x0000,	//................ 0x34
		0x0600,	//.....OO.........
		0x0780,	//.....OOOO.......
		0x24E0,	//..O..O..OOO.....
		0x2438,	//..O..O....OOO...
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2400,	//..O..O..........

		0x0000,	//................ 0x35
		0x19FC,	//...OO..OOOOOOO..
		0x39FC,	//..OOO..OOOOOOO..
		0x2044,	//..O......O...O..
		0x2044,	//..O......O...O..
		0x30C4,	//..OO....OO...O..
		0x1F9C,	//...OOOOOO..OOO..
		0x0F1C,	//....OOOO...OOO..

		0x0000,	//................ 0x36
		0x0FF0,	//....OOOOOOOO....
		0x1FF8,	//...OOOOOOOOOO...
		0x30CC,	//..OO....OO..OO..
		0x2044,	//..O......O...O..
		0x30C4,	//..OO....OO...O..
		0x1F9C,	//...OOOOOO..OOO..
		0x0F18,	//....OOOO...OO...

		0x0000,	//................ 0x37
		0x003C,	//..........OOOO..
		0x003C,	//..........OOOO..
		0x0004,	//.............O..
		0x3E04,	//..OOOOO......O..
		0x3FC8,	//..OOOOOOOO..O...
		0x01FC,	//.......OOOOOOO..
		0x001C,	//...........OOO..

		0x0000,	//................ 0x38
		0x0E30,	//....OOO...OO....
		0x1F78,	//...OOOOO.OOOO...
		0x31CC,	//..OO...OOO..OO..
		0x2084,	//..O.....O....O..
		0x31CC,	//..OO...OOO..OO..
		0x1F78,	//...OOOOO.OOOO...
		0x0E30,	//....OOO...OO....

		0x0000,	//................ 0x39
		0x18F0,	//...OO...OOOO....
		0x39F8,	//..OOO..OOOOOO...
		0x230C,	//..O...OO....OO..
		0x2204,	//..O...O......O..
		0x310C,	//..OO...O....OO..
		0x1FF8,	//...OOOOOOOOOO...
		0x0FF0,	//....OOOOOOOO....

		0x0000,	//................ 0x3a
		0x0000,	//................
		0x0000,	//................
		0x0C30,	//....OO....OO....
		0x0C30,	//....OO....OO....
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x3b
		0x0000,	//................
		0x0000,	//................
		0x2C30,	//..O.OO....OO....
		0x1C30,	//...OOO....OO....
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................ 0x3c
		0x0100,	//.......O........
		0x0380,	//......OOO.......
		0x06C0,	//.....OO.OO......
		0x0C60,	//....OO...OO.....
		0x1830,	//...OO.....OO....
		0x3018,	//..OO.......OO...
		0x600C,	//.OO.........OO..

		0x0000,	//................ 0x3d
		0x0240,	//......O..O......
		0x0240,	//......O..O......
		0x0240,	//......O..O......
		0x0240,	//......O..O......
		0x0240,	//......O..O......
		0x0240,	//......O..O......
		0x0240,	//......O..O......

		0x0000,	//................ 0x3e
		0x600C,	//.OO.........OO..
		0x3018,	//..OO.......OO...
		0x1830,	//...OO.....OO....
		0x0C60,	//....OO...OO.....
		0x06C0,	//.....OO.OO......
		0x0380,	//......OOO.......
		0x0100,	//.......O........

		0x0000,	//................ 0x3f
		0x0038,	//..........OOO...
		0x003C,	//..........OOOO..
		0x3604,	//..OO.OO......O..
		0x3704,	//..OO.OOO.....O..
		0x0184,	//.......OO....O..
		0x00FC,	//........OOOOOO..
		0x0078,	//.........OOOO...

		0x07F0,	//.....OOOOOOO.... 0x40
		0x0FF8,	//....OOOOOOOOO...
		0x180C,	//...OO.......OO..
		0x17C4,	//...O.OOOOO...O..
		0x1464,	//...O.O...OO..O..
		0x162C,	//...O.OO...O.OO..
		0x13F8,	//...O..OOOOOOO...
		0x07F0,	//.....OOOOOOO....

		0x0000,	//................ 0x41
		0x2000,	//..O.............
		0x3F04,	//..OOOOOO.....O..
		0x3FF4,	//..OOOOOOOOOO.O..
		0x023C,	//......O...OOOO..
		0x3FF0,	//..OOOOOOOOOO....
		0x3F00,	//..OOOOOO........
		0x2000,	//..O.............

		0x0000,	//................ 0x42
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2084,	//..O.....O....O..
		0x2084,	//..O.....O....O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x1F78,	//...OOOOO.OOOO...

		0x0000,	//................ 0x43
		0x0FF0,	//....OOOOOOOO....
		0x1FF8,	//...OOOOOOOOOO...
		0x300C,	//..OO........OO..
		0x2004,	//..O..........O..
		0x200C,	//..O.........OO..
		0x3018,	//..OO.......OO...
		0x187C,	//...OO....OOOOO..

		0x0000,	//................ 0x44
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2004,	//..O..........O..
		0x300C,	//..OO........OO..
		0x1FF8,	//...OOOOOOOOOO...
		0x0FF0,	//....OOOOOOOO....

		0x0000,	//................ 0x45
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2084,	//..O.....O....O..
		0x2084,	//..O.....O....O..
		0x3BDC,	//..OOO.OOOO.OOO..
		0x381C,	//..OOO......OOO..

		0x0000,	//................ 0x46
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2084,	//..O.....O....O..
		0x2084,	//..O.....O....O..
		0x03DC,	//......OOOO.OOO..
		0x001C,	//...........OOO..

		0x0000,	//................ 0x47
		0x0FF0,	//....OOOOOOOO....
		0x1FF8,	//...OOOOOOOOOO...
		0x300C,	//..OO........OO..
		0x2104,	//..O....O.....O..
		0x1108,	//...O...O....O...
		0x3F3C,	//..OOOOOO..OOOO..
		0x3F3C,	//..OOOOOO..OOOO..

		0x0000,	//................ 0x48
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x0080,	//........O.......
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..

		0x0000,	//................ 0x49
		0x2004,	//..O..........O..
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2004,	//..O..........O..
		0x2004,	//..O..........O..
		0x0000,	//................

		0x0000,	//................ 0x4a
		0x3C00,	//..OOOO..........
		0x3C04,	//..OOOO.......O..
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x1FFC,	//...OOOOOOOOOOO..
		0x0004,	//.............O..
		0x0004,	//.............O..

		0x0000,	//................ 0x4b
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x01C0,	//.......OOO......
		0x2774,	//..O..OOO.OOO.O..
		0x3E3C,	//..OOOOO...OOOO..
		0x380C,	//..OOO.......OO..

		0x0000,	//................ 0x4c
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2004,	//..O..........O..
		0x2000,	//..O.............
		0x3C00,	//..OOOO..........
		0x3C00,	//..OOOO..........

		0x0000,	//................ 0x4d
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x00F0,	//........OOOO....
		0x0780,	//.....OOOO.......
		0x00F0,	//........OOOO....
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..

		0x0000,	//................ 0x4e
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x20E0,	//..O.....OOO.....
		0x0704,	//.....OOO.....O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..

		0x0000,	//................ 0x4f
		0x0FF0,	//....OOOOOOOO....
		0x1FF8,	//...OOOOOOOOOO...
		0x300C,	//..OO........OO..
		0x2004,	//..O..........O..
		0x300C,	//..OO........OO..
		0x1FF8,	//...OOOOOOOOOO...
		0x0FF0,	//....OOOOOOOO....

		0x0000,	//................ 0x50
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2204,	//..O...O......O..
		0x230C,	//..O...OO....OO..
		0x01F8,	//.......OOOOOO...
		0x00F0,	//........OOOO....

		0x0000,	//................ 0x51
		0x0FF0,	//....OOOOOOOO....
		0x1FF8,	//...OOOOOOOOOO...
		0x380C,	//..OOO.......OO..
		0x2404,	//..O..O.......O..
		0x380C,	//..OOO.......OO..
		0x7FF8,	//.OOOOOOOOOOOO...
		0x4FF0,	//.O..OOOOOOOO....

		0x0000,	//................ 4x52
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2104,	//..O....O.....O..
		0x0384,	//......OOO....O..
		0x3EFC,	//..OOOOO.OOOOOO..
		0x3C78,	//..OOOO...OOOO...

		0x0000,	//................ 4x53
		0x3E70,	//..OOOOO..OOO....
		0x18F8,	//...OO...OOOOO...
		0x308C,	//..OO....O...OO..
		0x2184,	//..O....OO....O..
		0x310C,	//..OO...O....OO..
		0x1F18,	//...OOOOO...OO...
		0x0E7C,	//....OOO..OOOOO..

		0x0000,	//................ 4x54
		0x0000,	//................
		0x003C,	//..........OOOO..
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2004,	//..O..........O..
		0x003C,	//..........OOOO..

		0x0000,	//................ 4x55
		0x0004,	//.............O..
		0x1FFC,	//...OOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2000,	//..O.............
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x1FFC,	//...OOOOOOOOOOO..

		0x0000,	//................ 4x56
		0x0004,	//.............O..
		0x01FC,	//.......OOOOOOO..
		0x0FFC,	//....OOOOOOOOOO..
		0x3E00,	//..OOOOO.........
		0x0FFC,	//....OOOOOOOOOO..
		0x01FC,	//.......OOOOOOO..
		0x0004,	//.............O..

		0x0000,	//................ 4x57
		0x03FC,	//......OOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3E00,	//..OOOOO.........
		0x07C0,	//.....OOOOO......
		0x3E00,	//..OOOOO.........
		0x3FFC,	//..OOOOOOOOOOOO..
		0x03FC,	//......OOOOOOOO..

		0x0000,	//................ 4x58
		0x300C,	//..OO........OO..
		0x3E7C,	//..OOOOO..OOOOO..
		0x37EC,	//..OO.OOOOOO.OO..
		0x0180,	//.......OO.......
		0x37EC,	//..OO.OOOOOO.OO..
		0x3E7C,	//..OOOOO..OOOOO..
		0x300C,	//..OO........OO..

		0x0000,	//................ 4x59
		0x0004,	//.............O..
		0x007C,	//.........OOOOO..
		0x20FC,	//..O.....OOOOOO..
		0x3F80,	//..OOOOOOO.......
		0x3F84,	//..OOOOOOO....O..
		0x20FC,	//..O.....OOOOOO..
		0x007C,	//.........OOOOO..

		0x0000,	//................ 4x5a
		0x383C,	//..OOO.....OOOO..
		0x3E3C,	//..OOOOO...OOOO..
		0x2784,	//..O..OOOO....O..
		0x21E4,	//..O....OOOO..O..
		0x3C7C,	//..OOOO...OOOOO..
		0x3C1C,	//..OOOO.....OOO..

		0x0000,	//................
		0x0000,	//................
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x2004,	//..O..........O..
		0x2004,	//..O..........O..
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................
		0x000c,	//............OO..
		0x003c,	//..........OOOO..
		0x00f0,	//........OOOO....
		0x03c0,	//......OOOO......
		0x0f00,	//....OOOO........
		0x3c00,	//..OOOO..........
		0x3000,	//..OO............

		0x0000,	//................
		0x0000,	//................
		0x2004,	//..O..........O..
		0x2004,	//..O..........O..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x3FFC,	//..OOOOOOOOOOOO..
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................
		0x0000,	//................
		0x0010,	//...........O....
		0x0008,	//............O...
		0x0004,	//.............O..
		0x0008,	//............O...
		0x0010,	//...........O....
		0x0000,	//................

		0x0000,	//................
		0x2000,	//..O.............
		0x2000,	//..O.............
		0x2000,	//..O.............
		0x2000,	//..O.............
		0x2000,	//..O.............
		0x2000,	//..O.............
		0x2000,	//..O.............

		0x0000,	//................
		0x0000,	//................
		0x0000,	//................
		0x0004,	//.............O..
		0x0008,	//............O...
		0x0000,	//................
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................
		0x0E40,	//....OOO..O......
		0x1120,	//...O...O..O.....
		0x1120,	//...O...O..O.....
		0x1120,	//...O...O..O.....
		0x0920,	//....O..O..O.....
		0x1FC0,	//...OOOOOOO......
		0x1000,	//...O............

		0x0000,	//................
		0x0008,	//............O...
		0x1FF8,	//...OOOOOOOOOO...
		0x0840,	//....O....O......
		0x1020,	//...O......O.....
		0x1020,	//...O......O.....
		0x0840,	//....O....O......
		0x0780,	//.....OOOO.......

		0x0000,	//................
		0x0780,	//.....OOOO.......
		0x0840,	//....O....O......
		0x1020,	//...O......O.....
		0x1020,	//...O......O.....
		0x1040,	//...O.....O......
		0x08E0,	//....O...OOO.....
		0x0000,	//................

		0x0000,	//................
		0x0780,	//.....OOOO.......
		0x0840,	//....O....O......
		0x1020,	//...O......O.....
		0x1020,	//...O......O.....
		0x0848,	//....O....O..O...
		0x1FF8,	//...OOOOOOOOOO...
		0x1000,	//...O............

		0x0000,	//................
		0x0780,	//.....OOOO.......
		0x0940,	//....O..O.O......
		0x1120,	//...O...O..O.....
		0x1120,	//...O...O..O.....
		0x1140,	//...O...O.O......
		0x0980,	//....O..OO.......
		0x0000,	//................

		0x0000,	//................
		0x0000,	//................
		0x1040,	//...O.....O......
		0x1FF0,	//...OOOOOOOOO....
		0x1048,	//...O.....O..O...
		0x1048,	//...O.....O..O...
		0x0048,	//.........O..O...
		0x0000,	//................

		0x0000,	//................
		0x47C0,	//.O...OOOOO......
		0x4820,	//.O..O.....O.....
		0x4820,	//.O..O.....O.....
		0x4820,	//.O..O.....O.....
		0x4440,	//.O...O...O......
		0x3FE0,	//..OOOOOOOOO.....
		0x0020,	//..........O.....

		0x1008,	//...O........O...
		0x1FF8,	//...OOOOOOOOOO...
		0x1040,	//...O.....O......
		0x0020,	//..........O.....
		0x0020,	//..........O.....
		0x1020,	//...O......O.....
		0x1FC0,	//...OOOOOOO......
		0x1000,	//...O............

		0x0000,	//................
		0x0000,	//................
		0x1020,	//...O......O.....
		0x1020,	//...O......O.....
		0x1FE8,	//...OOOOOOOO.O...
		0x1000,	//...O............
		0x1000,	//...O............
		0x0000,	//................

		0x0000,	//................
		0x0000,	//................
		0x4000,	//.O..............
		0x4020,	//.O........O.....
		0x4020,	//.O........O.....
		0x3FE8,	//..OOOOOOOOO.O...
		0x0000,	//................
		0x0000,	//................

		0x0000,	//................
		0x1008,	//...O........O...
		0x1FF8,	//...OOOOOOOOOO...
		0x0100,	//.......O........
		0x02A0,	//......O.O.O.....
		0x1460,	//...O.O...OO.....
		0x1820,	//...OO.....O.....
		0x1000,	//...O............

		0x0000,	//................
		0x0000,	//................
		0x1008,	//...O........O...
		0x1008,	//...O........O...
		0x1FF8,	//...OOOOOOOOOO...
		0x1000,	//...O............
		0x1000,	//...O............
		0x0000,	//................

		0x0000,	//................
		0x1020,	//...O......O.....
		0x1FC0,	//...OOOOOOO......
		0x1020,	//..........O.....
		0x1FC0,	//...OOOOOOO......
		0x0020,	//..........O.....
		0x1FC0,	//...OOOOOOO......
		0x1000,	//...O............

		0x0000,	//................
		0x1020,	//...O......O.....
		0x1FC0,	//...OOOOOOO......
		0x1020,	//..........O.....
		0x1020,	//..........O.....
		0x1FC0,	//...OOOOOOO......
		0x1000,	//...O............
		0x0000,	//................

		0x0000,	//................
		0x0780,	//.....OOOO.......
		0x0840,	//....O....O......
		0x1020,	//...O......O.....
		0x1020,	//...O......O.....
		0x1020,	//...O......O.....
		0x0840,	//....O....O......
		0x0780,	//.....OOOO.......

		0x0000,	//................
		0x4020,	//.O........O.....
		0x7FE0,	//.OOOOOOOOOO.....
		0x4840,	//.O..O....O......
		0x5020,	//.O.O......O.....
		0x1020,	//...O......O.....
		0x0840,	//....O....O......
		0x0780,	//.....OOOO.......

		0x0000,	//................
		0x0780,	//.....OOOO.......
		0x0840,	//....O....O......
		0x1020,	//...O......O.....
		0x5020,	//.O.O......O.....
		0x4840,	//.O..O....O......
		0x7FE0,	//.OOOOOOOOOO.....
		0x4020,	//.O........O.....

		0x0000,	//................
		0x0000,	//................
		0x1020,	//...O......O.....
		0x1FE0,	//...OOOOOOOO.....
		0x1040,	//...O.....O......
		0x0020,	//..........O.....
		0x0040,	//.........O......
		0x0000,	//................

		0x0000,	//................
		0x1CC0,	//...OOO..OO......
		0x0920,	//....O..O..O.....
		0x1120,	//...O...O..O.....
		0x1220,	//...O..O...O.....
		0x1240,	//...O..O..O......
		0x0CE0,	//....OO..OOO.....
		0x0000,	//................

		0x0000,	//................
		0x0000,	//................
		0x0040,	//.........O......
		0x0FF8,	//....OOOOOOOOO...
		0x1040,	//...O.....O......
		0x1040,	//...O.....O......
		0x0800,	//....O...........
		0x0000,	//................

		0x0000,	//................
		0x0020,	//..........O.....
		0x0FE0,	//....OOOOOOO.....
		0x1000,	//...O............
		0x1000,	//...O............
		0x0820,	//....O.....O.....
		0x1FE0,	//...OOOOOOOO.....
		0x1000,	//...O............

		0x0000,	//................
		0x0020,	//..........O.....
		0x01E0,	//.......OOOO.....
		0x0620,	//.....OO...O.....
		0x1800,	//...OO...........
		0x0620,	//.....OO...O.....
		0x01E0,	//.......OOOO.....
		0x0020,	//..........O.....

		0x0000,	//................
		0x03E0,	//......OOOOO.....
		0x1C00,	//...OOO..........
		0x0600,	//.....OO.........
		0x01C0,	//.......OOO......
		0x0600,	//.....OO.........
		0x1C00,	//...OOO..........
		0x03E0,	//......OOOOO.....

		0x0000,	//................
		0x1020,	//...O......O.....
		0x1860,	//...OO....OO.....
		0x14A0,	//...O.O..O.O.....
		0x0300,	//......OO........
		0x14A0,	//...O.O..O.O.....
		0x1860,	//...OO....OO.....
		0x1020,	//...O......O.....

		0x0000,	//................
		0x4020,	//.O........O.....
		0x41E0,	//.O.....OOOO.....
		0x6620,	//.OO..OO...O.....
		0x5800,	//.O.OO...........
		0x0620,	//.....OO...O.....
		0x01E0,	//.......OOOO.....
		0x0020,	//..........O.....

		0x0000,	//................
		0x18E0,	//...OO...OOO.....
		0x1420,	//...O.O....O.....
		0x1220,	//...O..O...O.....
		0x1120,	//...O...O..O.....
		0x10A0,	//...O....O.O.....
		0x1C60,	//...OOO...OO.....
		0x0000,	//................
};

void GetFontData(unsigned char ch,U16* buf)
{
	int i;
	int offset;
	offset = (ch-0x20)*8;
	for(i=0;i<8;i++)
		buf[i] = font8x16[offset+i ];
}

#endif

#define FONT_R 0 
#define FONT_G 0 
#define FONT_B 0 
#define FONTBG_R 0 
#define FONTBG_G 255 
#define FONTBG_B 0 
#define FONT_W 8
#define FONT_H 16
void GetFontData(unsigned char ch,U16* buf);
//8x16 font
void drawchar(int x,int y,char ch,BOOL bBg)
{
	int i,k;
	U16 fontdata[16];
	GetFontData(ch,fontdata);
	
	for(k=0;k<FONT_W;k++)
	{
		for(i=0;i<FONT_H ;i++)
		{
			if( fontdata[k] & (1<<i))
			{
				LCDputpixel(x+k,y+i,FONT_R,FONT_G,FONT_B);
//				debugstring(".");
			}
			else
			{
				if(bBg==TRUE)
					LCDputpixel(x+k,y+i,FONTBG_R,FONTBG_G,FONTBG_B);
			}
		}
//		debugstring("\r\n");
	}
}

void drawstring(int x, int y, char* str,BOOL bBG)
{
	while(*str)
	{
		drawchar(x,y,*str,bBG);
		x+=FONT_W;
		str++;		
	}
}
#ifdef LCD_SUPPORT_FILESYSTEM
 typedef struct tag_BITMAPFILEHEADER {
	U32   bfSize;
	U32    bfReserved; 
	U32   bfOffBits; 
	U32  biSize; 
	S32   biWidth; 
	S32   biHeight; 
	U16   biPlanes; 
	U16   biBitCount;
	U32  biCompression; 
	U32  biSizeImage; 
	S32   biXPelsPerMeter; 
	S32   biYPelsPerMeter; 
	U32  biClrUsed; 
	U32  biClrImportant; 
}BITMAPFILEHEADER;

   
typedef struct tag_RGBQUAD {
	U8    rgbBlue;
	U8    rgbGreen; 
    U8    rgbRed;
	U8    rgbReserved;
} RGBQUAD; 

BOOL drawBMPRect(char* fname,int startx, int starty,int dx,int dy)
{
	FIL fsrc;
	FIL* fp;
	FRESULT res;
	U32 br;
	ALIGN4 BITMAPFILEHEADER bmpfh;
	U32 w,h;
	U16 ID;
	
	fp = &fsrc;
	
	res = f_open(fp,fname,FA_OPEN_EXISTING | FA_READ);
	if(res != FR_OK)
	{
		debugprintf("file(%s) not found\r\n",fname);
		return FALSE;
	}
	f_read(fp,&ID,2,&br);
	f_read(fp,&bmpfh,sizeof(BITMAPFILEHEADER),&br);
	if(ID != 0x4d42) // "BM"
	{
		debugprintf("Invalid BMP-ID(%x)\r\n",ID);
		f_close(fp);
		return FALSE;
	}
	if (bmpfh.biCompression != 0 ) 
	{
		f_close(fp);
		return FALSE;
	}
	if( bmpfh.biBitCount == 8 || bmpfh.biBitCount == 4 ) 
	{
		debugstring("not support 4 or 8 bit bmp\r\n");
		f_close(fp);		
		return FALSE;
	}

	w = bmpfh.biWidth;
	h = bmpfh.biHeight;
	U32 ibpl; //line pitch
	int i,x, y;
	ALIGN4 U8 linebuf[256*3];
	ibpl = ((w*3) + 3) & 0xfffffffc;
	if(ibpl>512*3)
	{
		debugprintf("Image width is too big \r\n",w);
		f_close(fp);
		return FALSE;
	}
	
	LCDRamSet(startx,starty,startx+dx-1,starty+dy-1);
	volatile U8* frame=(volatile U8*)(LCD_BASE_ADDR|1);
	
	for(y=dy;y>0;y--)
	{
		f_lseek(fp,bmpfh.bfOffBits+(y-1)*ibpl);		
		res = f_read(fp,linebuf,ibpl,&br);
		if(res || br==0)
			break;
		for(i=0,x=0;x<dx;x++)
		{
			*frame = linebuf[i+2];
			*frame = linebuf[i+1];
			*frame = linebuf[i];
			i+=3;
		}
	}

	f_close(fp);
	return TRUE;
}
BOOL drawBMP(char* fname)
{
	FIL fsrc;
	FIL* fp;
	FRESULT res;
	U32 br;
	ALIGN4 BITMAPFILEHEADER bmpfh;
	U32 w,h;
	U16 ID;
	int end_x,end_y;
	
	fp = &fsrc;
	res = f_open(fp,fname,FA_OPEN_EXISTING | FA_READ);
	if(res != FR_OK)
	{
		debugprintf("file(%s) not found\r\n",fname);
		return FALSE;
	}
	f_read(fp,&ID,2,&br);
	f_read(fp,&bmpfh,sizeof(BITMAPFILEHEADER),&br);
	if(ID != 0x4d42) // "BM"
	{
		debugprintf("Invalid BMP-ID(%x)\r\n",ID);
		f_close(fp);
		return FALSE;
	}
	if (bmpfh.biCompression != 0 ) 
	{
		f_close(fp);
		return FALSE;
	}
	if( bmpfh.biBitCount == 8 || bmpfh.biBitCount == 4 ) 
	{
		debugstring("not support 4 or 8 bit bmp\r\n");
		f_close(fp);		
		return FALSE;
	}

	w = bmpfh.biWidth;
	h = bmpfh.biHeight;
	U32 ibpl; //line pitch
	int i,x, y;
	ALIGN4 U8 linebuf[240*3];
	ibpl = ((w*3) + 3) & 0xfffffffc;
	if(ibpl>240*3)
	{
		debugprintf("Image width is too big \r\n",w);
		f_close(fp);
		return FALSE;
	}
	end_x = w>240?240:w;
	end_y = h>320?320:h;
	
	LCDRamSet(0,0,end_x-1,end_y-1);
	volatile U8* frame=(volatile U8*)(LCD_BASE_ADDR|1);
	
	for(y=end_y;y>0;y--)
	{
		f_lseek(fp,bmpfh.bfOffBits+(y-1)*ibpl);		
		res = f_read(fp,linebuf,ibpl,&br);
		if(res || br==0)
			break;
		for(i=0,x=0;x<end_x;x++)
		{
			*frame = linebuf[i+2];
			*frame = linebuf[i+1];
			*frame = linebuf[i];
			i+=3;
		}
	}

	f_close(fp);
	return TRUE;
}
#endif

void drawVline(int x, int y,int dy,U8 r, U8 g, U8 b)
{
	LCDRamSet(x,y,x,y+dy);
    for (y=0; y<dy; y++)
    {
		*(volatile unsigned char *)(LCD_BASE_ADDR|1)=(unsigned char)r;//red
		*(volatile unsigned char *)(LCD_BASE_ADDR|1)=(unsigned char)(g);//green
		*(volatile unsigned char *)(LCD_BASE_ADDR|1)=(unsigned char)(b);//blue
    }
}
void drawHline(int x, int y,int dx,U8 r, U8 g, U8 b)
{
	LCDRamSet(x,y,x+dx,y);
	for (x=0; x<dx; x++)
	{
		*(volatile unsigned char *)(LCD_BASE_ADDR|1)=(unsigned char)r;//red
		*(volatile unsigned char *)(LCD_BASE_ADDR|1)=(unsigned char)(g);//green
		*(volatile unsigned char *)(LCD_BASE_ADDR|1)=(unsigned char)(b);//blue
	}
}

void drawboxline(int x, int y, int dx, int dy,U8 r, U8 g, U8 b)
{
	drawHline(x,y,dx,r,g,b);
	drawVline(x,y,dy,r,g,b);
	drawVline(x+dx,y,dy,r,g,b);
	drawHline(x,y+dx,dx,r,g,b);
}
